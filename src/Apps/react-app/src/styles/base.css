/* ========================================
   Base Styles - Reset & Global
   ======================================== */

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Poppins', 'Segoe UI', sans-serif;
    background:
        radial-gradient(circle at 20% 20%, rgba(244, 93, 72, 0.25), transparent 45%),
        radial-gradient(circle at 80% 0%, rgba(88, 214, 160, 0.25), transparent 50%),
        linear-gradient(160deg, #03050b 0%, #050b14 50%, #0a111f 100%);
    min-height: 100vh;
    color: var(--text);
    line-height: 1.6;
    overflow-x: hidden;
    transition: background 0.5s ease, color 0.4s ease;
    position: relative;
}

/* Dark Theme: Animated Starry Night Overlay */
body::before {
    content: '';
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    opacity: 1;

    /* Optimized SVG: 
       - ViewBox 1000x1000 to prevent horizontal banding
       - Round Core + Radiating Rays (8 rays) for realistic shine
       - Metallic/Gold tint on secondary rays
    */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1000 1000'%3E%3Cdefs%3E%3CradialGradient id='halo' cx='50%25' cy='50%25' r='50%25'%3E%3Cstop offset='0%25' stop-color='%23ffffff' stop-opacity='0.6'/%3E%3Cstop offset='100%25' stop-color='%23ffffff' stop-opacity='0'/%3E%3C/radialGradient%3E%3Csymbol id='realStar' viewBox='0 0 24 24'%3E%3C!-- Round Core --%3E%3Ccircle cx='12' cy='12' r='2' fill='%23fff'/%3E%3C!-- Soft Glow Halo --%3E%3Ccircle cx='12' cy='12' r='6' fill='url(%23halo)'/%3E%3C!-- 4 Long Rays (White) --%3E%3Cpath d='M12 2V22 M2 12H22' stroke='%23fff' stroke-width='1' stroke-linecap='round' opacity='0.9'/%3E%3C!-- 4 Short Rays (Gold/Metallic) --%3E%3Cpath d='M12 6V18 M6 12H18' stroke='%23ffd700' stroke-width='0.8' transform='rotate(45 12 12)' stroke-linecap='round' opacity='0.8'/%3E%3C/symbol%3E%3C/defs%3E%3C!-- Tiny Stars (Scattered over 1000x1000) --%3E%3Ccircle cx='50' cy='50' r='1' fill='%23fff' opacity='0.5'/%3E%3Ccircle cx='150' cy='250' r='1.5' fill='%23fff' opacity='0.3'/%3E%3Ccircle cx='400' cy='120' r='1' fill='%23fff' opacity='0.6'/%3E%3Ccircle cx='650' cy='80' r='1.2' fill='%23fff' opacity='0.4'/%3E%3Ccircle cx='850' cy='320' r='1' fill='%23fff' opacity='0.5'/%3E%3Ccircle cx='50' cy='600' r='1.5' fill='%23fff' opacity='0.3'/%3E%3Ccircle cx='250' cy='750' r='1' fill='%23fff' opacity='0.6'/%3E%3Ccircle cx='550' cy='650' r='1.2' fill='%23fff' opacity='0.4'/%3E%3Ccircle cx='300' cy='400' r='1' fill='%23fff' opacity='0.7'/%3E%3Ccircle cx='150' cy='900' r='1.1' fill='%23fff' opacity='0.4'/%3E%3Ccircle cx='700' cy='500' r='1.3' fill='%23fff' opacity='0.5'/%3E%3Ccircle cx='450' cy='550' r='0.9' fill='%23fff' opacity='0.6'/%3E%3Ccircle cx='200' cy='500' r='1' fill='%23fff' opacity='0.3'/%3E%3Ccircle cx='600' cy='200' r='1.2' fill='%23fff' opacity='0.5'/%3E%3Ccircle cx='350' cy='50' r='1' fill='%23fff' opacity='0.4'/%3E%3Ccircle cx='900' cy='450' r='1' fill='%23fff' opacity='0.5'/%3E%3Ccircle cx='500' cy='850' r='1.4' fill='%23fff' opacity='0.3'/%3E%3Ccircle cx='780' cy='700' r='1.1' fill='%23fff' opacity='0.6'/%3E%3Ccircle cx='950' cy='150' r='1.2' fill='%23fff' opacity='0.4'/%3E%3Ccircle cx='800' cy='900' r='1' fill='%23fff' opacity='0.5'/%3E%3Ccircle cx='100' cy='800' r='1.3' fill='%23fff' opacity='0.4'/%3E%3Ccircle cx='350' cy='950' r='1' fill='%23fff' opacity='0.6'/%3E%3C!-- Large Rays Stars (Reduced to 6 & Scattered) --%3E%3Cuse href='%23realStar' x='150' y='180' width='14' height='14' opacity='0.9'/%3E%3Cuse href='%23realStar' x='750' y='100' width='10' height='10' opacity='0.7'/%3E%3Cuse href='%23realStar' x='420' y='450' width='16' height='16' opacity='1'/%3E%3Cuse href='%23realStar' x='850' y='650' width='12' height='12' opacity='0.8'/%3E%3Cuse href='%23realStar' x='100' y='700' width='8' height='8' opacity='0.6'/%3E%3Cuse href='%23realStar' x='550' y='850' width='15' height='15' opacity='0.85'/%3E%3C/svg%3E");

    background-size: 1000px 1000px;
    background-repeat: repeat;
    /* Slow linear drift: 1000px/1000px matches 180s/2000px scaling roughly */
    animation: starryDrift 180s linear infinite;
    will-change: background-position;
}

/* Light Theme: Floating Clouds Overlay */
body.light-theme::before {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 600'%3E%3Cdefs%3E%3Cfilter id='blur'%3E%3CfeGaussianBlur in='SourceGraphic' stdDeviation='5'/%3E%3C/filter%3E%3Cpath id='cloud' d='M25,48 Q30,30 45,35 Q55,20 75,30 Q90,25 90,45 Q100,45 100,60 Q100,75 80,75 L25,75 Q10,75 10,60 Q10,48 25,48 Z' fill='%23ffffff'/%3E%3C/defs%3E%3Cg filter='url(%23blur)'%3E%3C!-- Upper Layer (Lowered by ~40px) --%3E%3Cuse href='%23cloud' transform='translate(50,60) scale(1.8)' opacity='0.6'/%3E%3Cuse href='%23cloud' transform='translate(250,80) scale(2.0)' opacity='0.7'/%3E%3Cuse href='%23cloud' transform='translate(450,65) scale(1.9)' opacity='0.6'/%3E%3Cuse href='%23cloud' transform='translate(650,85) scale(2.1)' opacity='0.7'/%3E%3Cuse href='%23cloud' transform='translate(850,70) scale(1.8)' opacity='0.6'/%3E%3Cuse href='%23cloud' transform='translate(1050,90) scale(2.0)' opacity='0.7'/%3E%3C!-- Lower Layer (Lowered by ~40px) --%3E%3Cuse href='%23cloud' transform='translate(150,140) scale(1.2)' opacity='0.5'/%3E%3Cuse href='%23cloud' transform='translate(350,160) scale(1.1)' opacity='0.4'/%3E%3Cuse href='%23cloud' transform='translate(550,130) scale(1.3)' opacity='0.5'/%3E%3Cuse href='%23cloud' transform='translate(750,150) scale(1.1)' opacity='0.4'/%3E%3Cuse href='%23cloud' transform='translate(950,140) scale(1.2)' opacity='0.5'/%3E%3Cuse href='%23cloud' transform='translate(1150,170) scale(1.0)' opacity='0.3'/%3E%3Cuse href='%23cloud' transform='translate(50,180) scale(0.9)' opacity='0.3'/%3E%3Cuse href='%23cloud' transform='translate(280,190) scale(1.0)' opacity='0.4'/%3E%3Cuse href='%23cloud' transform='translate(600,200) scale(0.9)' opacity='0.3'/%3E%3Cuse href='%23cloud' transform='translate(900,190) scale(1.0)' opacity='0.4'/%3E%3C/g%3E%3C/svg%3E");
    background-size: 200% auto;
    background-repeat: repeat-x;
    background-position: left top;
    animation: floatingClouds 40s ease infinite;
    opacity: 1;
}

a {
    color: inherit;
    text-decoration: none;
}

button,
input,
select {
    font-family: inherit;
}

#root {
    min-height: 100vh;
    position: relative;
    z-index: 1;
}

/* Layout */
.app {
    position: relative;
    min-height: 100vh;
}

.page {
    position: relative;
    z-index: 3;
    width: min(1200px, 94vw);
    margin: 0 auto;
    padding: 64px 0 48px;
}

/* Nebula Background Effect */
.nebula {
    position: fixed;
    width: 420px;
    height: 420px;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.22), transparent 55%);
    filter: blur(80px);
    opacity: 0.4;
    pointer-events: none;
    animation: drift 18s ease-in-out infinite alternate;
    z-index: 0;
}

.nebula:nth-child(1) {
    top: 5%;
    left: 5%;
}

.nebula:nth-child(2) {
    bottom: 10%;
    right: 15%;
    animation-delay: 4s;
}

.nebula:nth-child(3) {
    top: 20%;
    right: 30%;
    animation-delay: 8s;
}

/* ========================================
   Lunar New Year Decoration - Bamboo with Red Envelopes & Firecrackers
   ======================================== */
.garland {
    position: relative;
    width: 100%;
    height: 70px;
    margin: 10px auto 35px;
    overflow: visible;
    pointer-events: none;
    opacity: 1;
    transition: opacity 0.35s ease, height 0.35s ease, margin 0.35s ease;
    background:
        /* Bamboo leaves: SVG Clusters for 13 points (2% to 98% distribution) */
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'%3E%3Cpath d='M25,0 Q10,20 0,45 Q15,35 25,0' fill='%234a7c3f'/%3E%3Cpath d='M25,0 Q30,20 35,35 Q28,25 25,0' fill='%236b9c59'/%3E%3C/svg%3E") calc(2.2% - 17.5px) 7px / 35px 45px no-repeat,
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'%3E%3Cpath d='M25,0 Q40,20 50,45 Q35,35 25,0' fill='%234a7c3f'/%3E%3Cpath d='M25,0 Q20,20 15,35 Q22,25 25,0' fill='%235d9648'/%3E%3C/svg%3E") calc(10% - 17.5px) 7px / 35px 45px no-repeat,
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'%3E%3Cpath d='M25,0 Q10,20 0,45 Q15,35 25,0' fill='%233d6b33'/%3E%3Cpath d='M25,0 Q30,20 35,35 Q28,25 25,0' fill='%235d9648'/%3E%3C/svg%3E") calc(18.5% - 17.5px) 7px / 35px 45px no-repeat,
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'%3E%3Cpath d='M25,0 Q40,20 50,45 Q35,35 25,0' fill='%234a7c3f'/%3E%3Cpath d='M25,0 Q20,20 15,35 Q22,25 25,0' fill='%236b9c59'/%3E%3C/svg%3E") calc(26.5% - 17.5px) 7px / 35px 45px no-repeat,
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'%3E%3Cpath d='M25,0 Q10,20 0,45 Q15,35 25,0' fill='%235d9648'/%3E%3Cpath d='M25,0 Q30,20 35,35 Q28,25 25,0' fill='%234a7c3f'/%3E%3C/svg%3E") calc(35% - 17.5px) 7px / 35px 45px no-repeat,
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'%3E%3Cpath d='M25,0 Q40,20 50,45 Q35,35 25,0' fill='%233d6b33'/%3E%3Cpath d='M25,0 Q20,20 15,35 Q22,25 25,0' fill='%235d9648'/%3E%3C/svg%3E") calc(43% - 17.5px) 7px / 35px 45px no-repeat,
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'%3E%3Cpath d='M25,0 Q10,20 0,45 Q15,35 25,0' fill='%234a7c3f'/%3E%3Cpath d='M25,0 Q30,20 35,35 Q28,25 25,0' fill='%236b9c59'/%3E%3C/svg%3E") calc(51.5% - 17.5px) 7px / 35px 45px no-repeat,
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'%3E%3Cpath d='M25,0 Q40,20 50,45 Q35,35 25,0' fill='%235d9648'/%3E%3Cpath d='M25,0 Q20,20 15,35 Q22,25 25,0' fill='%233d6b33'/%3E%3C/svg%3E") calc(59.5% - 17.5px) 7px / 35px 45px no-repeat,
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'%3E%3Cpath d='M25,0 Q10,20 0,45 Q15,35 25,0' fill='%233d6b33'/%3E%3Cpath d='M25,0 Q30,20 35,35 Q28,25 25,0' fill='%235d9648'/%3E%3C/svg%3E") calc(68% - 17.5px) 7px / 35px 45px no-repeat,
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'%3E%3Cpath d='M25,0 Q40,20 50,45 Q35,35 25,0' fill='%234a7c3f'/%3E%3Cpath d='M25,0 Q20,20 15,35 Q22,25 25,0' fill='%236b9c59'/%3E%3C/svg%3E") calc(76% - 17.5px) 7px / 35px 45px no-repeat,
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'%3E%3Cpath d='M25,0 Q10,20 0,45 Q15,35 25,0' fill='%235d9648'/%3E%3Cpath d='M25,0 Q30,20 35,35 Q28,25 25,0' fill='%234a7c3f'/%3E%3C/svg%3E") calc(84.5% - 17.5px) 7px / 35px 45px no-repeat,
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'%3E%3Cpath d='M25,0 Q40,20 50,45 Q35,35 25,0' fill='%233d6b33'/%3E%3Cpath d='M25,0 Q20,20 15,35 Q22,25 25,0' fill='%235d9648'/%3E%3C/svg%3E") calc(92.5% - 17.5px) 7px / 35px 45px no-repeat,
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50'%3E%3Cpath d='M25,0 Q10,20 0,45 Q15,35 25,0' fill='%235d9648'/%3E%3Cpath d='M25,0 Q30,20 35,35 Q28,25 25,0' fill='%234a7c3f'/%3E%3C/svg%3E") calc(101% - 17.5px) 7px / 35px 45px no-repeat;
}

/* Bamboo Branch with Nodes and Leaves */
.garland::before {
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    top: 10px;
    height: 12px;
    /* Bamboo SVG updated with 13 nodes (roughly every 8%) */
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 12' preserveAspectRatio='none'%3E%3Cpath d='M0,6 L10,6 L18,5 L26,6 L34,7 L42,6 L50,5 L58,6 L66,6 L74,7 L82,6 L90,6 L100,6' stroke='%23558b2f' stroke-width='7' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M2,2 L2,10 M10,2 L10,10 M18,1 L18,9 M26,2 L26,10 M34,3 L34,11 M42,2 L42,10 M50,1 L50,9 M58,2 L58,10 M66,2 L66,10 M74,3 L74,11 M82,2 L82,10 M90,2 L90,10 M98,2 L98,10' stroke='%2333691e' stroke-width='1' opacity='0.8'/%3E%3C/svg%3E");
    background-size: 100% 100%;
    background-repeat: no-repeat;
    z-index: 1;
    border-radius: 0;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

/* Red Envelopes (Lì Xì) and Firecrackers - SVG Implementation */
.garland::after {
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    top: 16px;
    height: 120px;
    z-index: 2;
    background-image:
        /* Node 1 (2%): Outer Lantern (Left) - Size 32x96 */
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 60'%3E%3Cline x1='10' y1='0' x2='10' y2='10' stroke='%23d4a03a' stroke-width='1'/%3E%3Ccircle cx='10' cy='19' r='8' fill='%23e53935' /%3E%3Crect x='5' y='11' width='10' height='2' fill='%23ffd700' /%3E%3Crect x='5' y='27' width='10' height='2' fill='%23ffd700' /%3E%3Cline x1='10' y1='29' x2='10' y2='42' stroke='%23e53935' stroke-width='2'/%3E%3C/svg%3E"),

        /* Node 2 (10%): Red Envelope */
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 60'%3E%3Cline x1='10' y1='0' x2='10' y2='15' stroke='%23d4a03a' stroke-width='1'/%3E%3Crect x='2' y='15' width='16' height='24' fill='%23d32f2f' rx='1'/%3E%3Crect x='2' y='19' width='16' height='4' fill='%23b71c1c'/%3E%3Ccircle cx='10' cy='27' r='3' fill='%23ffd700'/%3E%3C/svg%3E"),

        /* Node 3 (18%): Banh Chung (30x90) */
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 60'%3E%3Cline x1='10' y1='0' x2='10' y2='15' stroke='%23d4a03a' stroke-width='1'/%3E%3Crect x='2' y='15' width='16' height='16' fill='%23388e3c' rx='1'/%3E%3Cline x1='2' y1='23' x2='18' y2='23' stroke='%23aed581' stroke-width='1'/%3E%3Cline x1='10' y1='15' x2='10' y2='31' stroke='%23aed581' stroke-width='1'/%3E%3Crect x='8' y='21' width='4' height='4' fill='%23d32f2f'/%3E%3C/svg%3E"),

        /* Node 4 (26%): Old Firecracker (Single) */
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 60'%3E%3Cline x1='10' y1='0' x2='10' y2='10' stroke='%23d4a03a' stroke-width='1'/%3E%3Crect x='5' y='10' width='10' height='30' fill='%23d32f2f'/%3E%3Cline x1='5' y1='16' x2='15' y2='16' stroke='%23ffd700' stroke-width='1'/%3E%3Cline x1='5' y1='25' x2='15' y2='25' stroke='%23ffd700' stroke-width='1'/%3E%3Cline x1='5' y1='34' x2='15' y2='34' stroke='%23ffd700' stroke-width='1'/%3E%3Cline x1='10' y1='40' x2='10' y2='46' stroke='%23555' stroke-width='1'/%3E%3C/svg%3E"),

        /* Node 5 (34%): Firecracker String (Dây tét pháo) */
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 60'%3E%3Cpath d='M10,0 L10,55' stroke='%23b71c1c' stroke-width='1.2'/%3E%3Cg fill='%23d32f2f'%3E%3Crect x='3' y='10' width='6' height='2.5' rx='0.5' transform='rotate(-20 6 11)'/%3E%3Crect x='11' y='12' width='6' height='2.5' rx='0.5' transform='rotate(20 14 13)'/%3E%3Crect x='3' y='17' width='6' height='2.5' rx='0.5' transform='rotate(-20 6 18)'/%3E%3Crect x='11' y='19' width='6' height='2.5' rx='0.5' transform='rotate(20 14 20)'/%3E%3Crect x='3' y='24' width='6' height='2.5' rx='0.5' transform='rotate(-20 6 25)'/%3E%3Crect x='11' y='26' width='6' height='2.5' rx='0.5' transform='rotate(20 14 27)'/%3E%3Crect x='3' y='31' width='6' height='2.5' rx='0.5' transform='rotate(-20 6 32)'/%3E%3Crect x='11' y='33' width='6' height='2.5' rx='0.5' transform='rotate(20 14 34)'/%3E%3Crect x='3' y='38' width='6' height='2.5' rx='0.5' transform='rotate(-20 6 39)'/%3E%3Crect x='11' y='40' width='6' height='2.5' rx='0.5' transform='rotate(20 14 41)'/%3E%3Crect x='3' y='45' width='6' height='2.5' rx='0.5' transform='rotate(-20 6 46)'/%3E%3Crect x='11' y='47' width='6' height='2.5' rx='0.5' transform='rotate(20 14 48)'/%3E%3C/g%3E%3Crect x='6' y='2' width='8' height='8' fill='%23d32f2f' rx='1'/%3E%3Ccircle cx='10' cy='6' r='2' fill='%23ffd700'/%3E%3C/svg%3E"),

        /* Node 6 (42%): Coins */
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 60'%3E%3Cline x1='10' y1='0' x2='10' y2='15' stroke='%23d32f2f' stroke-width='1'/%3E%3Ccircle cx='10' cy='19' r='4' fill='%23ffca28' stroke='%23fbc02d' stroke-width='1'/%3E%3Crect x='8.5' y='17.5' width='3' height='3' fill='%23d32f2f'/%3E%3Ccircle cx='10' cy='26' r='4' fill='%23ffca28' stroke='%23fbc02d' stroke-width='1'/%3E%3Crect x='8.5' y='24.5' width='3' height='3' fill='%23d32f2f'/%3E%3Ccircle cx='10' cy='33' r='4' fill='%23ffca28' stroke='%23fbc02d' stroke-width='1'/%3E%3Crect x='8.5' y='31.5' width='3' height='3' fill='%23d32f2f'/%3E%3Cline x1='10' y1='37' x2='10' y2='45' stroke='%23d32f2f' stroke-width='1.5'/%3E%3C/svg%3E"),

        /* Node 7 (50%): Round Lantern (Center) - Size 32x96 */
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 60'%3E%3Cline x1='10' y1='0' x2='10' y2='10' stroke='%23d4a03a' stroke-width='1'/%3E%3Ccircle cx='10' cy='19' r='8' fill='%23e53935' /%3E%3Crect x='5' y='11' width='10' height='2' fill='%23ffd700' /%3E%3Crect x='5' y='27' width='10' height='2' fill='%23ffd700' /%3E%3Cline x1='10' y1='29' x2='10' y2='42' stroke='%23e53935' stroke-width='2'/%3E%3C/svg%3E"),

        /* Node 8 (58%): Coins */
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 60'%3E%3Cline x1='10' y1='0' x2='10' y2='15' stroke='%23d32f2f' stroke-width='1'/%3E%3Ccircle cx='10' cy='19' r='4' fill='%23ffca28' stroke='%23fbc02d' stroke-width='1'/%3E%3Crect x='8.5' y='17.5' width='3' height='3' fill='%23d32f2f'/%3E%3Ccircle cx='10' cy='26' r='4' fill='%23ffca28' stroke='%23fbc02d' stroke-width='1'/%3E%3Crect x='8.5' y='24.5' width='3' height='3' fill='%23d32f2f'/%3E%3Ccircle cx='10' cy='33' r='4' fill='%23ffca28' stroke='%23fbc02d' stroke-width='1'/%3E%3Crect x='8.5' y='31.5' width='3' height='3' fill='%23d32f2f'/%3E%3Cline x1='10' y1='37' x2='10' y2='45' stroke='%23d32f2f' stroke-width='1.5'/%3E%3C/svg%3E"),

        /* Node 9 (66%): Firecracker String (Dây tét pháo) */
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 60'%3E%3Cpath d='M10,0 L10,55' stroke='%23b71c1c' stroke-width='1.2'/%3E%3Cg fill='%23d32f2f'%3E%3Crect x='3' y='10' width='6' height='2.5' rx='0.5' transform='rotate(-20 6 11)'/%3E%3Crect x='11' y='12' width='6' height='2.5' rx='0.5' transform='rotate(20 14 13)'/%3E%3Crect x='3' y='17' width='6' height='2.5' rx='0.5' transform='rotate(-20 6 18)'/%3E%3Crect x='11' y='19' width='6' height='2.5' rx='0.5' transform='rotate(20 14 20)'/%3E%3Crect x='3' y='24' width='6' height='2.5' rx='0.5' transform='rotate(-20 6 25)'/%3E%3Crect x='11' y='26' width='6' height='2.5' rx='0.5' transform='rotate(20 14 27)'/%3E%3Crect x='3' y='31' width='6' height='2.5' rx='0.5' transform='rotate(-20 6 32)'/%3E%3Crect x='11' y='33' width='6' height='2.5' rx='0.5' transform='rotate(20 14 34)'/%3E%3Crect x='3' y='38' width='6' height='2.5' rx='0.5' transform='rotate(-20 6 39)'/%3E%3Crect x='11' y='40' width='6' height='2.5' rx='0.5' transform='rotate(20 14 41)'/%3E%3Crect x='3' y='45' width='6' height='2.5' rx='0.5' transform='rotate(-20 6 46)'/%3E%3Crect x='11' y='47' width='6' height='2.5' rx='0.5' transform='rotate(20 14 48)'/%3E%3C/g%3E%3Crect x='6' y='2' width='8' height='8' fill='%23d32f2f' rx='1'/%3E%3Ccircle cx='10' cy='6' r='2' fill='%23ffd700'/%3E%3C/svg%3E"),

        /* Node 10 (74%): Old Firecracker (Single) */
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 60'%3E%3Cline x1='10' y1='0' x2='10' y2='10' stroke='%23d4a03a' stroke-width='1'/%3E%3Crect x='5' y='10' width='10' height='30' fill='%23d32f2f'/%3E%3Cline x1='5' y1='16' x2='15' y2='16' stroke='%23ffd700' stroke-width='1'/%3E%3Cline x1='5' y1='25' x2='15' y2='25' stroke='%23ffd700' stroke-width='1'/%3E%3Cline x1='5' y1='34' x2='15' y2='34' stroke='%23ffd700' stroke-width='1'/%3E%3Cline x1='10' y1='40' x2='10' y2='46' stroke='%23555' stroke-width='1'/%3E%3C/svg%3E"),

        /* Node 11 (82%): Banh Chung (30x90) */
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 60'%3E%3Cline x1='10' y1='0' x2='10' y2='15' stroke='%23d4a03a' stroke-width='1'/%3E%3Crect x='2' y='15' width='16' height='16' fill='%23388e3c' rx='1'/%3E%3Cline x1='2' y1='23' x2='18' y2='23' stroke='%23aed581' stroke-width='1'/%3E%3Cline x1='10' y1='15' x2='10' y2='31' stroke='%23aed581' stroke-width='1'/%3E%3Crect x='8' y='21' width='4' height='4' fill='%23d32f2f'/%3E%3C/svg%3E"),

        /* Node 12 (90%): Red Envelope */
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 60'%3E%3Cline x1='10' y1='0' x2='10' y2='15' stroke='%23d4a03a' stroke-width='1'/%3E%3Crect x='2' y='15' width='16' height='24' fill='%23d32f2f' rx='1'/%3E%3Crect x='2' y='19' width='16' height='4' fill='%23b71c1c'/%3E%3Ccircle cx='10' cy='27' r='3' fill='%23ffd700'/%3E%3C/svg%3E"),

        /* Node 13 (98%): Outer Lantern (Right) - Size 32x96 */
        url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 60'%3E%3Cline x1='10' y1='0' x2='10' y2='10' stroke='%23d4a03a' stroke-width='1'/%3E%3Ccircle cx='10' cy='19' r='8' fill='%23e53935' /%3E%3Crect x='5' y='11' width='10' height='2' fill='%23ffd700' /%3E%3Crect x='5' y='27' width='10' height='2' fill='%23ffd700' /%3E%3Cline x1='10' y1='29' x2='10' y2='42' stroke='%23e53935' stroke-width='2'/%3E%3C/svg%3E");

    background-size:
        32px 96px, 20px 60px, 30px 90px, 20px 60px, 20px 60px, 20px 60px,
        32px 96px,
        20px 60px, 20px 60px, 20px 60px, 30px 90px, 20px 60px, 32px 96px;
    background-position:
        calc(2.2% - 16px) 0,
        calc(10% - 10px) 0,
        calc(18.5% - 15px) 0,
        calc(26.5% - 10px) 0,
        calc(35% - 10px) 0,
        calc(43% - 10px) 0,
        calc(51.5% - 16px) 0,
        calc(59.5% - 10px) 0,
        calc(68% - 10px) 0,
        calc(76% - 10px) 0,
        calc(84.5% - 15px) 0,
        calc(92.5% - 10px) 0,
        calc(101% - 16px) 0;
    background-repeat: no-repeat;
    animation: swayEnvelopes 4s ease-in-out infinite;
}